<div class="row">
  <div class="col-lg-12">
    <ol class="ember-view breadcrumbs breadcrumb">
      <li class="first current">
        {{#link-to 'admin.index' }}{{t 'home'}}{{/link-to}}
      </li>
    </ol>
  </div>
    <div class="col-lg-12">
      <h1 class="page-header">{{t 'permission.title'}}</h1>
    </div>
    <!-- /.col-lg-12 -->

    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-body">
          <table class="table table-striped table-hover sorted_table" id="permissionsTable">
            <thead>
              <tr><th>{{t 'permission.title'}}</th>
              {{#each roles}}<th>{{name}}</th>{{/each}}</tr>
            </thead>
            <tbody>
            {{#each permissions}}
              <tr><td>{{name}}</td>
              {{#each ../roles}}<td>

              {{#we-contains permissions ../name}}
                <input checked type="checkbox" role-name="{{name}}" role-id="{{id}}" permission-name="{{../../name}}" title="{{name}}">
              {{else}}
                <input type="checkbox" role-name="{{name}}" permission-name="{{../../name}}" role-id="{{id}}" title="{{name}}">
              {{/we-contains}}

              </td>{{/each}}</tr>
            {{/each}}
              {{#each widgets}}
                <tr model-widget="{{id}}" class="ui-state-default ui-sortable-handle" model-id="{{id}}" data-weight="{{weight}}">
                  <td style="width: 30px; cursor: move;"><span class="glyphicon glyphicon-resize-vertical"></span></td>
                  <td><bind model-widget-{{id}}="id">{{id}}</bind></td>
                  <td><bind model-widget-{{id}}="title">{{title}}</bind></td>
                  <td><bind model-widget-{{id}}="type">{{type}}</bind></td>
                  <td>
                    <button we-action="event" event="update-widget-modal" model-id="{{id}}" type="button" class="btn btn-primary">Edit</button>
                    <a href="" we-action="event" event="model-delete-widget" model="widget" model-id="{{id}}" class="btn btn-default">Delete</a>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
</div>
<script type="text/javascript">
  $(function() {
    we.admin.permission.liveUpdate('#permissionsTable');
  });
</script>